

%-----------------------------------------------------------------------------------------------------
%	INCLUSIÓN DE PAQUETES BÁSICOS
%-----------------------------------------------------------------------------------------------------

\documentclass{article}
\usepackage{enumerate}
\usepackage{wrapfig}
\usepackage{graphicx}
\usepackage{tikz-cd}


%-----------------------------------------------------------------------------------------------------
%	SELECCIÓN DEL LENGUAJE
%-----------------------------------------------------------------------------------------------------

% Paquetes para adaptar Látex al Español:
\usepackage[spanish,es-noquoting, es-tabla, es-lcroman]{babel} % Cambia
\usepackage[utf8]{inputenc}                                    % Permite los acentos.
\selectlanguage{spanish}                                       % Selecciono como lenguaje el Español.

%flechassssss
\def\flechaBiyectiva{\mathrel{\mkern16mu  \vcenter{\hbox{$\scriptscriptstyle+$}}\mkern-25mu{\mathrel{\mkern0mu\vcenter{\hbox{$\scriptscriptstyle+$}}\mkern-9mu{\longrightarrow}}}}}
\def\xFlechaInyectiva #1{\mathrel{\ooalign{\thinspace\thinspace$\mapstochar\mkern5mu$\hfil\cr$\xrightarrow{#1}$\cr}}}
\def\flechaInyectiva {\mathrel{\ooalign{\thinspace\thinspace$\mapstochar\mkern5mu$\hfil\cr$\longrightarrow$\cr}}}
\def\xFlechaSobreyectiva #1{\mathrel{\ooalign{\hfil$\mapstochar\mkern5mu$\thinspace\thinspace\cr$\xrightarrow{#1}$\cr}}}
\def\flechaSobreyectiva {\mathrel{\ooalign{\hfil$\mapstochar\mkern5mu$\thinspace\thinspace\cr$\longrightarrow$\cr}}}
\def\barra {\mathrel{\ooalign{\hfil$\mapstochar\mkern5mu$\thinspace\thinspace\cr$---$\cr}}}
\tikzset{
	sobre/.tip={Glyph[glyph math command=flechaSobreyectiva,glyph length=1em]},
	inyec/.tip={Glyph[glyph math command=barra,glyph length=0.6em]},
}
%llave a la derecha
\newenvironment{rcases}
{\left.\begin{aligned}}
	{\end{aligned}\right\rbrace}

\usepackage[all]{xy} %para diagramas conmutativos

%-----------------------------------------------------------------------------------------------------
%	SELECCIÓN DE LA FUENTE
%-----------------------------------------------------------------------------------------------------

% Fuente utilizada.
\usepackage{courier}                    % Fuente Courier.
\usepackage{microtype}                  % Mejora la letra final de cara al lector.

%-----------------------------------------------------------------------------------------------------
%	ESTILO DE PÁGINA
%-----------------------------------------------------------------------------------------------------

% Paquetes para el diseño de página:
\usepackage{fancyhdr}               % Utilizado para hacer títulos propios.
\usepackage{lastpage}               % Referencia a la última página. Utilizado para el pie de página.
\usepackage{extramarks}             % Marcas extras. Utilizado en pie de página y cabecera.
\usepackage[parfill]{parskip}       % Crea una nueva línea entre párrafos.
\usepackage{geometry}               % Asigna la "geometría" de las páginas.

% Se elige el estilo fancy y márgenes de 3 centímetros.
\pagestyle{fancy}
\geometry{left=3cm,right=3cm,top=3cm,bottom=3cm,headheight=1cm,headsep=0.5cm} % Márgenes y cabecera.
% Se limpia la cabecera y el pie de página para poder rehacerlos luego.
\fancyhf{}

% Espacios en el documento:
\linespread{1.1}                        % Espacio entre líneas.
\setlength\parindent{0pt}               % Selecciona la indentación para cada inicio de párrafo.

% Cabecera del documento. Se ajusta la línea de la cabecera.
\renewcommand\headrule{
	\begin{minipage}{1\textwidth}
		\hrule width \hsize
	\end{minipage}
}

% Texto de la cabecera:
\lhead{\docauthor}                          % Parte izquierda.
\chead{}                                    % Centro.
\rhead{\subject \ - \doctitle}              % Parte derecha.

% Pie de página del documento. Se ajusta la línea del pie de página.
\renewcommand\footrule{
	\begin{minipage}{1\textwidth}
		\hrule width \hsize
	\end{minipage}\par
}

\lfoot{}                                                 % Parte izquierda.
\cfoot{}                                                 % Centro.
\rfoot{Página\ \thepage\ de\ \protect\pageref{LastPage}} % Parte derecha.

%----------------------------------------------------------------------------------------
%	MATEMÁTICAS
%----------------------------------------------------------------------------------------

% Paquetes para matemáticas:
\usepackage{amsmath, amsthm, amssymb, amsfonts, amscd} % Teoremas, fuentes y símbolos.

% Nuevo estilo para definiciones
\newtheoremstyle{definition-style} % Nombre del estilo
{5pt}                % Espacio por encima
{5pt}                % Espacio por debajo
{}                   % Fuente del cuerpo
{}                   % Identación: vacío= sin identación, \parindent = identación del parráfo
{\bf}                % Fuente para la cabecera
{.}                  % Puntuación tras la cabecera
{.5em}               % Espacio tras la cabecera: { } = espacio usal entre palabras, \newline = nueva línea
{}                   % Especificación de la cabecera (si se deja vaía implica 'normal')

% Nuevo estilo para teoremas
\newtheoremstyle{theorem-style} % Nombre del estilo
{5pt}                % Espacio por encima
{5pt}                % Espacio por debajo
{\itshape}           % Fuente del cuerpo
{}                   % Identación: vacío= sin identación, \parindent = identación del parráfo
{\bf}                % Fuente para la cabecera
{.}                  % Puntuación tras la cabecera
{.5em}               % Espacio tras la cabecera: { } = espacio usal entre palabras, \newline = nueva línea
{}                   % Especificación de la cabecera (si se deja vaía implica 'normal')

% Nuevo estilo para ejemplos y ejercicios
\newtheoremstyle{example-style} % Nombre del estilo
{5pt}                % Espacio por encima
{5pt}                % Espacio por debajo
{}                   % Fuente del cuerpo
{}                   % Identación: vacío= sin identación, \parindent = identación del parráfo
{\scshape}                % Fuente para la cabecera
{:}                  % Puntuación tras la cabecera
{.5em}               % Espacio tras la cabecera: { } = espacio usal entre palabras, \newline = nueva línea
{}                   % Especificación de la cabecera (si se deja vaía implica 'normal')

% Teoremas:
\theoremstyle{theorem-style}  % Otras posibilidades: plain (por defecto), definition, remark
\newtheorem{theorem}{Teorema}[section]  % [section] indica que el contador se reinicia cada sección
\newtheorem{corollary}[theorem]{Corolario} % [theorem] indica que comparte el contador con theorem
\newtheorem{lemma}[theorem]{Lema}
\newtheorem{proposition}[theorem]{Proposición}

% Definiciones, notas, conjeturas
\theoremstyle{definition}
\newtheorem{definition}{Definición}[section]
\newtheorem{conjecture}{Conjetura}[section]
\newtheorem*{note}{Nota} % * indica que no tiene contador
\newtheorem*{observation}{Observación} % * indica que no tiene contador
\newtheorem*{properties}{Propiedades}
\newtheorem*{comment}{Comentario clase}

% Ejemplos, ejercicios
\theoremstyle{example-style}
\newtheorem{example}{Ejemplo}[section]
\newtheorem{exercise}{Ejercicio}[section]

%-----------------------------------------------------------------------------------------------------
%	PORTADA
%-----------------------------------------------------------------------------------------------------

% Elija uno de los siguientes formatos.
% No olvide incluir los archivos .sty asociados en el directorio del documento.
%\usepackage{title1}
\usepackage{title2}
%\usepackage{title3}

%-----------------------------------------------------------------------------------------------------
%	TÍTULO, AUTOR Y OTROS DATOS DEL DOCUMENTO
%-----------------------------------------------------------------------------------------------------

% Título del documento.
\newcommand{\doctitle}{Tema 4}
% Subtítulo.
\newcommand{\docsubtitle}{Teorema de estructura de módulos.}
% Fecha.
\newcommand{\docdate}{20 \ de \ Noviembre \ de \ 2018}
% Asignatura.
\newcommand{\subject}{Estructuras algebraicas}
% Autor.
\newcommand{\docauthor}{Sergio Mayo, Manuel de Prada, Jorge Vázquez}
\newcommand{\docaddress}{Universidade de Santiago de Compostela}
\newcommand{\docemail}{lalala@gmail.com}

%-----------------------------------------------------------------------------------------------------
%	RESUMEN
%-------------------------------					----------------------------------------------------------------------

% Resumen del documento. Va en la portada.
% Puedes también dejarlo vacío, en cuyo caso no aparece en la portada.
%\newcommand{\docabstract}{}
\newcommand{\docabstract}{Tema de módulos del peazo profe Javier Majaderias.}

\begin{document}

\maketitle
\tikzset{node distance=2cm, auto}
%-----------------------------------------------------------------------------------------------------
%	ÍNDICE
%-----------------------------------------------------------------------------------------------------

% Profundidad del Índice:
%\setcounter{tocdepth}{1}

\newpage
\tableofcontents
\newpage

%----------------------------------------------------------------------------------------
%	Sección 1: Deficiones y teoremas
%----------------------------------------------------------------------------------------

\section{Módulos de tipo finito sobre un DIP}
	\subsection{Equivalencia de matrices.}
	En esta sección, $ R $ denota un anillo (conmutativo).
	\begin{lemma}
		Sea $ E_{ij} $ la matriz cuadrada sobre $ R $ con 1 en el lugar $ (i,j) $ y 0 en todos los demás lugares. Se verifica:
		\begin{enumerate}[\hspace{1cm}i)]
			\item $E_{ij} \cdot E_{rs}= \begin{cases}
			0 &\text{si } j\neq r\\
			E_{is} &\text{si } j=r
			\end{cases}$
			\item Para cada matriz $A$, se tiene:\\
				$ E_{ij} \cdot A= $ matriz que hace que todas las filas nulas salvo la $ i $-ésima, en la cual aparece la $ j $-ésima de $ A $.

				$A \cdot E_{ij} = $ matriz que hace que todas las columnas nulas salvo la $ j $-ésima, en la cual aparece la $ i $-ésima de $ A $.
		\end{enumerate}
	\end{lemma}
	\begin{definition}
		Se llaman matrices elementales a las matrices de cada uno de los siguientes tres tipos:
		\begin{enumerate}[\hspace{1cm}I)]
			\item Sea $ b\in R, i\neq j :$
			\[ T_{ij}(b) := I+b\cdot E_{ij}\]
			$ T_{ij}(b)= $ matriz cuadrada con 1 en la diagonal, $ b $ en el lugar $ r_{ij} $ y 0 en todos los demás lugares.

			$ T_{ij}(b) $ es inversible, siendo $ T_{ij}(b)^{-1}=T_{ij}(-b) $. Teniendo en cuenta que $E_{ij}\cdot E_{ij}=0$ si $j\neq i$, comprobamos la inversibilidad:
			\[(I+bE_{ij})(I-bE_{ij})=I-bE_{ij}+bE_{ij}-b^2E_{ij}E_{ij}=I\]
			\item Sea $ u $ unidad de $ R $:
			\[ D_i(u):=I+(u-1) E_{ii} \]
			$ D_i(u) = $ matriz diagonal con u en el lugar (i,i) y 1 en los demás lugares de la diagonal $( D_i(u):=I+uE_{ii}-E_{ii})$.

			$ D_i(u)$ es inversible, con $ D_i(u)^{-1}=D_i(u^{-1}) $. Veámoslo ($E_{ii}\cdot E_{ii}=E_{ii}$):
			\[ [I+(u-1) E_{ii}][I+(u^{-1}-1) E_{ii}] = I+(u^{-1}-1)E_{ii}+(u-1)E_{ii}+(u^{-1}-1)(u-1)E_{ii}E_{ii}=\]
			\[=I+u^{-1}E_{ii}-E_{ii}+uE_{ii}-E_{ii}+(1-u^{-1}-u+1)E_{ii}=I\]
			\item $ P_{ij}:=I-E_{ii}-E_{jj}+E_{ij}+E_{ji}= \begin{bmatrix}
			1 & \cdots & 0 & \cdots & 0 & \cdots & 0  \\
			\vdots & \ddots &\vdots & &\vdots & &\vdots \\
			0 & \cdots & 0 & \cdots & 1 & \cdots & 0  \\
			\vdots & &\vdots & \ddots &\vdots & &\vdots \\
			0 & \cdots & 1 & \cdots & 0 & \cdots & 0  \\
			\vdots & &\vdots & &\vdots & \ddots &\vdots \\
			0 & \cdots & 0 & \cdots & 0 & \cdots & 0  \\
			\end{bmatrix} $

			$ P_{ij}  $ es inversible: $ P_{ij}^{-1}=P_{ij} $. Comprobémoslo:

			$ P_{ij}\cdot P_{ij}=I-E_{ii}-E_{jj}+E_{ij}+E_{ji}-E_{ii}+(E_{ii}E_{ii}=E_{ii})+(E_{ii}E_{jj}=0)-(E_{ii}E_{ij}=E_{ij})-(E_{ii}E_{ji}=0)-E_{jj} +(E_{jj}E_{ii}=0)+(E_{jj}E_{jj}=E_{jj})-(E_{jj}E_{ij}=0)-(E_{jj}E_{ji}=E_{ji})+E_{ij}-(E_{ij}E_{ii}=0)-(E_{ij}E_{jj}=E_{ij})+(E_{ij}E_{ij}=0)+(E_{ij}E_{ji}=E_{ii})+E_{jj}-(E_{ji}E_{ii}=E_{ji})-(E_{ji}E_{jj}=0)+(E_{ji}E_{ij}=E_{jj})+(E_{ji}E_{ji})=I$.

		\end{enumerate}
	\end{definition}
	\begin{definition}
		Si $ A\in M_{m \times n}(R) $, se llaman operaciones elementales en $ A $, la multiplicación de $ A $ por la izquierda o por la derecha por matrices elementales.
		Las operaciones elementales son, por tanto:
		\begin{enumerate}
			\item $ T_{ij}(b) \cdot A = $ matriz obtenida de $ A $ sumándole a la fila $ i $ la $ j $ multiplicada por $ b $.

			$T_{ij}(b) \cdot A=(I+bE_{ij})A=A+bE_{ij}A$
			\item $ A \cdot T_{ij}(b) $ matriz obtenida de $ A $ sumándole a la columna $ j $ la $ i $ multiplicada por $ b $.
			\item $ D_i(u) \cdot A =$ matriz obtenida de $ A $ multiplicando la fila $ i $ por $ u $.

			$ D_i(u)\cdot A= (I+(u-1)E_{ii})A=A+(u-1) E_{ii}A=A-E_{i_i} A +uE_{ii}A $
			\item $ A \cdot D_i(u)  =$ matriz obtenida de $ A $ multiplicando la columna $ i $ por $ u $.
			\item $ P_{ij} \cdot A = $ matriz obtenida a partir de A intercambiando las filas $ i $ y $ j $.

			$ P_{ij}A= (I-E_{ii}-E_{jj}+E_{ij}+E_{ji})A=A-E_{ii}A-E_{jj}A+E_{ij}A+E_{ji}A $
			\item $ A \cdot P_{ij}= $ matriz obtenida a partir de A intercambiando las columnas $ i $ y $ j $.
		\end{enumerate}
	\end{definition}
	\begin{definition}
		Dos matrices $ A, B \in M_{m\times n}(R)  $se dicen equivalentes si existen matrices $ Q \in M_{m\times m}(R), P \in M_{n\times n}(R) $ tales que:
		\[ B=QAP \]
		Nótese que las matrices obtenidas de $ A $ por un número finito de operaciones elementales son equivalentes a $ A $.
		\[ U_q \cdots U_1AV_1\cdots V_p=QAP\]
	\end{definition}
	\subsection{Diagonalización}
	\begin{theorem}
		Sea $ D $ un dominio de ideales principales. Si $ A \in M_{m\times n}(D) $, entonces $ A $ es equivalente a una matriz diagonal.
		\[ \text{diag}(d_1, \cdots, d_r, 0, \cdots, 0), \quad \text{con } 0\leq r \leq \min \{m,n\} \text{ y }\begin{cases}
			d_i\neq 0\\
			d_i \mid d_j $ si $ i\leq j
		\end{cases}\]


	\end{theorem}
	\begin{proof}
		\begin{note}
			Si $a\in D$, $a \neq 0$, se llama longitud de $a$ al número de elementos irreducibles de la factorización de $a$:
			\[a = up_1 \cdots p_r\]
			con $u$ unidad y $p_i$ irreducibles. Además, no tienen porque ser necesariamente distintos, por lo que $l(a) = r$; y si $a$ es unidad entonces $l(a) = 0$.
		\end{note}
		Si $A = 0$ no la demostración sería inmediata. Así pues, supondremos que $A \neq 0$. $\\$
		Trataremos de obtener en primer lugar matrices equivalentes a $A$ con un elemento en el lugar $(1,1)$ distinto de $0$ y de la menor longitud posible. $\\$
		Sea $a_{ij}$ un elemento no nulo de $A$ de longitud no nula. Intercambiando filas y columnas se lleva este elemento a la posición $(1,1)$. Se tiene entonces una matriz equivalente (que seguiremos denotando por $A$) con $a_{11} \neq 0$ y $l(a_{11})$ mínima. $\\$
		Si existe en la primera fila un elemento $a_{1k} \neq 0$ y que verifica que $a_{11} \nmid a_{1k}$, se lleva a la posición $(1,2)$ por intercambio de columnas. Denotaremos de nuevo por $A$ a la nueva matriz. $\\$
		Sea $a:= a_{11}$, $b:=a_{12}$ y $d = mcd(a, b)$:
		\[(d) = (a) + (b) \Rightarrow d = \alpha a + \beta b\]
		con $\alpha, \beta \in D$. Además, tenemos que $a = sd$ y $b = td$, con $s, t \in D$. Por lo que $\alpha s + \beta t = 1$. $\\$
		Como $d | a$, $d | b$, $a \nmid b$, entonces los factores irreducibles de $d$ están estrictamente contenidos entre los factores irreducibles de $a$, lo que implica que $l(d) < l(a)$.
		\[ \begin{pmatrix}
		s & t \\
		\beta & \alpha
		\end{pmatrix}
		\begin{pmatrix}
		 \alpha & -t \\
		\beta & s
		\end{pmatrix} =
		\begin{pmatrix}
		1 & 0\\
		0 & 1
		\end{pmatrix} =
		\begin{pmatrix}
		\alpha & -t \\
		\beta & s
		\end{pmatrix}
		\begin{pmatrix}
		s & t \\
		\beta & \alpha
		\end{pmatrix}
		\]
		con lo que $\begin{pmatrix}
		\alpha & -t \\
		\beta & s
		\end{pmatrix} $ es inversible y, por tanto, también es es inversible la matriz:
		\[U = \begin{bmatrix}
		\alpha & -t & ... & 0 \\
		\beta & s & ... & 0\\
		0  & 0 & 1 & ... & 0 \\
		0 & 0 & 0 & ... & 1
		\end{bmatrix}\]
		La matriz $AU$ es equivalente a la matriz $A$ y su primera fila es:
		\[d, a_{13}, ..., a_ {1n},\]
		con $l(d) < l(a)$.
		%FACIL CALCULO
		\begin{note}
			El paso de $A$ a $AU$ no es mediante operaciones elementales.
		\end{note}
		Se puede seguir disminuyendo la longitud del elemento de lugar $(1, 1)$ mientras exista en la primera fila un elemento $a_{1k} \neq 0$ con $a_{11} \nmid a_{1k}$, o, análogamente, mientras exista en la primera columna un elemento $a_{k1} \neq 0$ con $a_{11} \nmid a_{k1}$ (en este caso se multiplica por la izquierda por una matriz inversible).
		\begin{center}
			$a:= a_{11} $ $b:= a_{21}$, $a \nmid b$, $d = mcd(a, b)$ \\
			$d = \alpha a + \beta b$, $a = sd$, $b = td$, $\alpha s + \beta t = 1$ \\
		\end{center}
		\[\begin{pmatrix}
		\alpha & \beta \\
		 t & -s
		\end{pmatrix}
		\begin{pmatrix}
		s & \beta \\
		t & -\alpha
		\end{pmatrix} =
		\begin{pmatrix}
		1 & 0\\
		0 & 1
		\end{pmatrix} =
		\begin{pmatrix}
		s & \beta \\
		t & -\alpha
		\end{pmatrix}
		\begin{pmatrix}
		\alpha & \beta \\
		t & -s
		\end{pmatrix} \]
		\[V = \begin{bmatrix}
		\alpha & \beta & &... & 0 \\
		t & -s &  &... & 0\\
		0 & 0 & 1 & ... & 0 \\
		\vdots  & \vdots & \vdots & \ddots & \vdots\\
		0 & 0 & 0 &... & 1
		\end{bmatrix}\]
		La primera columna de $VA$:
		\[d, 0, a_{31}, ..., a_{n1}.\]
		Si $a_{11} | a_{1k}$, $1 \leq k \leq n$, $a_{11}|a_{k1}$, $1 \leq k \leq m$, entonces:
		\[a_{1k} = v_{1k}a_{11}, \hspace{0,2cm} a_{k1} = v_{k1}a_{11}\]
		$v_{1k}, v_{k1} \in D$. Así, restando a la columna (respectivamente fila) $k$ la primera columna (respectivamente fila) multiplicando por $v_{1k}$ (respectivamente $v_{1k}$), se obtiene una matriz equivalente a $A$ de la forma:
		\[\begin{bmatrix}
		b_{11} & 0 & ... & 0 \\
		0 & b_{22} & ... & b_{2n}\\
		\vdots  & \vdots &   \ddots & \vdots \\
		0 & b_{m2} &   ... & b_{mn}
		\end{bmatrix}\]
		Si en esta matriz existe un elemento $b_{kl}$ con $a_{11}\nmid b_{kl}$, entonces sumándole a la primera fila la fila $k$ se obtiene una nueva matriz equivalente, cuya primera fila es:
		\[a_{11}, b_{k2}, ..., b_{kl}, ..., b_{kn}\]
		y todavía se puede disminuir la longitud del elemento de lugar $(1,1)$. $\\$
		Repitiéndose el proceso, se llega a una matriz  equivalente del tipo anterior con $a_{11} | b_{kl}$, $2 \leq k \leq m$, $2 \leq l \leq n$. El mismo proceso (i.e., todo lo hecho hasta aquí) se aplica ahora a la submatriz: $(b_{ij})$ con $2 \leq i \leq m$, $2 \leq j \leq n$. $\\$
		Las transformaciones necesarias no alteran ni la primera fila $a_{11}, 0, .., 0$ ni la primera columna $a_{11}, 0, ..., 0$ de $A$, y se obtiene una matriz equivalente a $A$ de la forma:
		\[\begin{bmatrix}
		a_{11} & 0 & ... & &0 \\
		0 & b_{22} & ... & &0\\
		0 & 0 & c_{33} & ... & c_{3n} \\
		\vdots  & \vdots &  \vdots &\ddots & \vdots \\
		0 & 0  &  c_{m3} & ... & c_{mn}
		\end{bmatrix}\]
		con $b_{22} | c_{kl}$, $\forall k, l$. Además, $a_{11} | b_{22}$ ya que $a_{11} | b_{kl}$, $\forall k, l$. La divisibilidad sigue verificándose al sustituir los $b_{kl}$ por ser máximo común divisor y al hacer operaciones elementales. $\\$
		La continuación de este proceso conduce a la matriz diagonal indicada con $d_{1} = a_{11}$, $d_{2} =b_{22}$...
		\begin{note}
			Si $D$ es un dominio euclídeo, se puede aplicar el mismo proceso sustituyendo la longitud por el valor $\phi (a)$ (siendo $\phi$ la función euclídea), y entonces ña diagonalización se consigue utilizando solamente operaciones elementales. $\\$
		\end{note}
		En efecto, si existe en la primera fila un elemento $a_{1k}\neq 0$, con $a_{11} \nmid a_{1k}$, se lleva $a_{1k}$ a la posición $(1,2)$. Sea:
		\[a:= a_{12}, \hspace{0,2cm} a\nmid b.\]
		Entonces,
		\[\exists r, q \in D / b = aq + r \]
		con $r\neq 0$ y $\phi (r) < \phi (a)$. Restando a la segunda columna la primera multiplicada por $q$, se obtiene una matriz equivalente a $A$ de la forma:
		\[\begin{bmatrix}
		a & r & ...\\
		a_{21} & a_{22} - qa_{21} & ...  \\
		\vdots  & \vdots &  \vdots \\
		a_{m1} &   &
		\end{bmatrix}\]
		e intercambiando las dos primeras columnas:
		\[\begin{bmatrix}
		r & a & ...\\
		a_{22} - qa_{21} & a_{21} & ...  \\
		\vdots  & \vdots &  \vdots \\
		&  a_{m1}  &
		\end{bmatrix}\]
		con $\phi (r) < \phi (a)$.
	\end{proof}
	\begin{example}
		Una matriz $3\times 2$ de diagonal $(d_1,d_2)$ sería $\begin{bmatrix}
		d_1 & 0  \\
		0   & d_2\\
		0   & 0  \\
		\end{bmatrix}$
	\end{example}
	\begin{observation}
		Si el DIP es euclídeo la diagonalización se realiza mediante operaciones elementales, si no lo es, necesitaremos otras operaciones.
	\end{observation}

	BEGIN SERGIO 26-11

	\begin{example}
		\[ A = \begin{pmatrix}
				2 & 3 & 1 \\
				-3 & 2 & 4
		\end{pmatrix} \in \mathcal{M}_{2\times 3}(\mathbb{Z}), \ D=\mathbb{Z}, \ \phi=|\ |\]
		\[ \begin{pmatrix}
			2 & 3 & 1 \\
			-3 & 2 & 4
		\end{pmatrix} \xrightarrow{C_1\leftrightarrow C_3} \begin{pmatrix}
			1 & 3 & 2 \\
			4 & 2 & -3
			\end{pmatrix}\xrightarrow{\substack{C_2-3C_1\\C_3-2C_1}} \begin{pmatrix}
			1 & 0 & 0 \\
			4 & -10 & -11
			\end{pmatrix}\xrightarrow{F_2-4F_1}\begin{pmatrix}
			1 & 0 & 0 \\
			0 & -10 & -11
		\end{pmatrix}
	\xrightarrow{(-1)F_2}\]
		\[\begin{pmatrix}
			1 & 0 & 0 \\
			0 & 10 & 11
		\end{pmatrix}
		\xrightarrow{C_3-C_2} \begin{pmatrix}
			1 & 0 & 0 \\
			0 & 10 & 1
		\end{pmatrix}
		\xrightarrow{C_2\leftrightarrow C_3} \begin{pmatrix}
			1 & 0 & 0 \\
			0 & 1 & 10
		\end{pmatrix}
		\xrightarrow{C_3-10C_2}\begin{pmatrix}
			1 & 0 & 0 \\
			0 & 1 & 0
	\end{pmatrix}=B, \ d_1=1, \ d_2=1 \]

	Tenemos que $B=QAP$ con $P$ y $Q$ matrices invertibles. Lo que hemos hecho es $U_q\dots U_1AV_1\dots V_p$ ya que multiplicar por $V_i$ por la derecha es hacer operaciones elementales en columnas y multiplicar por $U_i$ por la izquierda es hacer operaciones elementales en filas.
	\[ QAP=U_q\dots U_1AV_1\dots V_p=U_q\dots U_1I_mAI_nV_1\dots V_p\]
	Luego $P$ es el resultado de hacer en la matriz identidad $I_n$ las mismas operaciones elementales en columnas que hemos hecho en $A$, y $Q$ es el resultado de hacer en $I_m$ las mismas operaciones elementales en filas que hemos hecho en $A$.\\
	Cálculo de $P$:
	\[ I_3 = \begin{pmatrix}
			1 & 0 & 0 \\
			0 & 1 & 0 \\
			0 & 0 & 1
			\end{pmatrix}\xrightarrow{C_1\leftrightarrow C_3}\begin{pmatrix}
			0 & 0 & 1 \\
			0 & 1 & 0 \\
			1 & 0 & 0
			\end{pmatrix}\xrightarrow{\substack{C_2-3C_1\\C_3-2C_1}}\begin{pmatrix}
			0 & 0 & 1 \\
			0 & 1 & 0 \\
			1 & -3 & -2
			\end{pmatrix}\xrightarrow{C_3-C_2}\begin{pmatrix}
			0 & 0 & 1 \\
			0 & 1 & -1 \\
			1 & -3 & 1
			\end{pmatrix}\xrightarrow{C_2\leftrightarrow C_3}\]
			\[\begin{pmatrix}
			0 & 1 & 0 \\
			0 & -1 & 1 \\
			1 & 1 & -3
			\end{pmatrix}\xrightarrow{C_3-10C_2}\begin{pmatrix}
			0 & 1 & -10 \\
			0 & -1 & 11 \\
			0 & 0 & -13
	\end{pmatrix}=P \]

	Cálculo de $Q$:
	\[I_2= \begin{pmatrix}
			1 & 0\\
			0 & 1
			\end{pmatrix}\xrightarrow{F_2-4F_1}\begin{pmatrix}
			1 & 0\\
			-4 & 1
			\end{pmatrix}\xrightarrow{(-1)F_2}\begin{pmatrix}
			1 & 0\\
			4 & -1
	\end{pmatrix}=Q\]

	\end{example}

	\section{Teorema de Estructura}
	\begin{proposition}
		Sea $D$ un DIP, $F$ un $D$-módulo libre de rango $n$ y $N$ un submódulo de $F$. Entonces $N$ es libre de rango $\leq n$.
	\end{proposition}

	\begin{proof}\ \\
		Inducción en $n=$ rango de $F$.
		\begin{itemize}
			\item $n=0\Rightarrow F=0\Rightarrow N=0 \Rightarrow N \text{ libre de rango } 0.$
			\item $n=1 \Rightarrow F \xrightarrow{\sim} D \Rightarrow N \text{ es isomorfo a un ideal de } D \Rightarrow N\simeq aD_i(a), \ a\in D \text{ (por ser D un DIP)}.$
			\begin{itemize}
				\item $a=0 \Rightarrow N=0 \Rightarrow N$ libre de rango 0.
				\item $a\neq 0 \Rightarrow N\simeq aD\simeq D/(0:a) = D$ ($a\neq 0 \Rightarrow (0:a)=0$) $\Rightarrow N$ libre de rango 1.
			\end{itemize}
		\end{itemize}
		Sea entonces $n>1$ y supongamos que es cierto para $D$-módulos libres de rango $<n$. Sea $\{e_1,\dots,e_n\}$ una base de $F$ y $F':=\langle e_1,\dots,e_n\rangle$. $F'$ es libre de rango $n-1$ y $F/F'$ es libre de rango 1 con base $\{e_1+F'\}$.\\
		Generadores:
		\[x\in F \Rightarrow x=\sum_{i=1}^n\lambda_i e_i \Rightarrow x+F' = \lambda_1 e_1 + \sum_{i=2}^n\lambda_i e_i + F' = \lambda_1 e_1 + F' = \lambda_1(e_1+F') \text{ \ \ ($\sum_{i=2}^n \lambda_i e_i \in F'$) }\]
		Linealmente independientes:
		\[\lambda(e_1+F')=F'\Rightarrow \lambda e_1+F'=F' \Rightarrow \lambda e_1 \in F' \Rightarrow \lambda e_1 = \mu_2e_2+\dots+\mu_ne_n \Rightarrow\]
		\[ -\lambda e_1+\mu_2e_2+\dots+\mu_ne_n=0 \Rightarrow -\lambda=0 \Rightarrow \lambda = 0\]

		Sea $\bar{N}:=(N+F')/F'$.
		\begin{itemize}
			\item $\bar{N}=0 \Rightarrow N+F'=F' \Rightarrow N\subset F' \Rightarrow N$ es libre de rango $\leq n-1 \leq n$ (por hipótesis de inducción)
			\item $\bar{N}\neq 0 \Rightarrow \bar{N}$ es libre de rango 1 y $\bar{N}\simeq D$ \  ($\bar{N}\subset F/F'$ e hipótesis de inducción teniendo en cuenta que $F/F'$ es libre de rango 1).
		\end{itemize}

		$N\cap F'$ es submódulo de $F' \Rightarrow N\cap F'$ (por inducción) es libre de rango $m\leq n-1$.\\
		Sea $\{y_1,\dots,y_m\}$ base de $N\cap F'$ y $z\in N$ tal que $\{z+F'\}$ es base de $\bar{N}$. Veamos que $\{z,y_1,\dots,y_m\}$ es base de $N$.\\
		Generadores:
		\[ x\in N \Rightarrow x+F'=\lambda(z+F') \Rightarrow x+F' = \lambda z + F' \Rightarrow\]
		\[\begin{rcases}
			x-\lambda z \in F' \\
			x-\lambda z \in N
	\end{rcases} \Rightarrow x-\lambda z \in N\cap F' \Rightarrow x-\lambda z = \sum_{i=1}^n\mu_iy_i \Rightarrow x=\lambda z + \sum_{i=1}^n\mu_iy_i\]
	Linealmente independientes:
	\[\lambda z + \sum_{i=1}^n\mu_iy_i=0 \Rightarrow  \lambda z = -\sum_{i=1}^n\mu_iy_i \in N\cap F' \subset F' \Rightarrow \lambda z +F' = \lambda(z+F') = F' \Rightarrow\]
	\[\sum_{i=1}^n\mu_iy_i=0 \Rightarrow \mu_i=0,\ 1\leq i\leq m\]

	\end{proof}

	\begin{lemma}
		Sea $M$ un $R$-módulo, $x_1,\dots,x_n \in M$ y $A=(a_{ij}) \in\mathcal{M}_{n\times n}(R)$ inversible. Sean $y_i=\sum_{j=1}^n a_{ij}x_j \ 1\leq i\leq n$.\\
		Si $\{x_1,\dots,x_n\}$ es un conjunto de generadores (respectivamente linealmente independientes) entonces $\{y_1,\dots,y_n\}$ también lo es.
	\end{lemma}

	\begin{proof}\ \\
		Generadores: Sea $B:=A^{-1},\ B=(b_{ij})\in \mathcal{M}_{n\times n}(R)$.
		\[\sum_{k=1}^nb_{pk}y_k=\sum_{k=1}^nb_{pk}(\sum_{l=1}^na_{kl}x_l)=\sum_{l=1}^n(\sum_{k=1}^nb_{pk}a_{kl})x_l\]
		Teniendo en cuenta que $\sum_{k=1}^nb_{pk}a_{kl}=(BA)_{pl}=(I_n)_{pl}=\delta_{pl}$ concluímos:
		\[\sum_{l=1}^n(\sum_{k=1}^nb_{pk}a_{kl})x_l=\sum_{i=1}^n\delta_{pl}x_l=x_p\]
		\[x_1,\dots,x_n \in \langle y_1,\dots, y_n \rangle \Rightarrow M=\langle x_1,\dots,x_n \rangle \subset \langle y_1,\dots,y_n \rangle \subset M \Rightarrow \langle y_1,\dots,y_n \rangle = M\]
		Linealmente independientes:\\
		Supongamos $\sum_{i=1}^n\lambda_iy_i=0$ y definimos $(c_{kl})=C:=A^t$.
		\[0=\sum_{i=1}^n\lambda_iy_i=\sum_{i=1}^n\lambda_i(\sum_{j=1}^na_{ij}x_j)=\sum_{j=1}^n(\sum_{i=1}^n\lambda_ia_{ij})x_j \Rightarrow \sum_{i=1}^n\lambda_ia_{ij}=\sum_{i=1}^nc_{ji}\lambda_i=0,\ 1\leq j\leq n\]

		Estas igualdades significan que $\ C\begin{pmatrix} \lambda_1 \\ \vdots \\ \lambda_n \end{pmatrix}=0$. Y como $A$ es inversible, $C$ también lo es de lo que deducimos:
		\[C^{-1}C\begin{pmatrix} \lambda_1 \\ \vdots \\ \lambda_n \end{pmatrix}=0 \Rightarrow \begin{pmatrix} \lambda_1 \\ \vdots \\ \lambda_n \end{pmatrix}=0 \Rightarrow \lambda_i=0 \ \ \  1\leq i \leq n\]
	\end{proof}

	END SERGIO 26-11

	PRADA 27-11
	\begin{theorem}
		Sea $ D $ un DIP y $ M $ un $ D $-módulo de tipo finito. Entonces $ M $ es suma directa de $ D$-módulos cíclicos.
		\[ M=Dz_1 \oplus \cdots \oplus Dz_s \]
		tal que $ (0:z_1) \supset (0:z_2) \supset ... \supset (0:z_s), \quad (0:z_n)\neq D $

	\end{theorem}
	\begin{proof}
		Sea $ \{X_1,\cdots, X_n\} $ un conjunto finito de generadores de $ M $. Sea $ F $ un $ D $-módulo libre de rango $ n $ con base $ \{e_1, \cdots e_n\} $, y sea $ \varepsilon:F\flechaSobreyectiva M $ el homomorfismo sobreyectivo $ \varepsilon(e_i)=x_i, \text{ con } 1\leq i\leq n $.

		Sea $ N:=\text{Ker}(\varepsilon) $:
		\[ N\flechaInyectiva F \xFlechaSobreyectiva{\ \varepsilon \ } M \]
		Por la propiedad previa, $ N $ es libre de rango $ \leq n $ y en particular, $ N $ es de tipo finito. Sea $ \{f_1, \cdots, f_n\} $ un conjunto finito de generadores de $ N $ (como caso particular, puede ser una base, pero en la demostración no se necesita que lo sea, ni tampoco se necesita suponer que $ m\leq n $). Entonces:
		\[ f_i = \sum_{j=1}^{n}a_{ij}e_j, \quad 1\leq i\leq m, a_{ij}\in D \]
		dado que $ \sum_{i=1}^{n} a_{ij}x_j=0 \ \forall i$  (ya que $ \varepsilon(f_i)=\varepsilon(\sum_{i=1}^{n} a_{ij} e_j)\Rightarrow \varepsilon(f_i)=  \sum_{i=1}^{n} a_{ij}x_j \in \text{Ker}(\varepsilon)\Rightarrow \sum_{i=1}^{n} a_{ij}x_j=0$).

		Sea $ A:=(a_{ij})\in M_{m \times n}(D) $. Se tiene :
		\[ f=Ae \]
		es decir:

		\[ \begin{pmatrix}
			 f_1 \\
			 f_2 \\
			 \vdots \\
			 f_m
		\end{pmatrix} = \begin{pmatrix}
		a_{11} & a_{12} & \cdots & a_{1n} \\
		a_{21} & a_{22} & \cdots & a_{2n} \\
		\vdots & \vdots & \ddots & \vdots \\
		a_{m1} & a_{m2} & \cdots & a_{mn} \\
		\end{pmatrix} \cdot \begin{pmatrix}
		e_1 \\
		e_2 \\
		\vdots \\
		e_m
		\end{pmatrix}\]
		lo cual no es un producto de matrices en el sentido usual, ya que $ f,e $ no son matrices sobre $ D $, pero la notación será igualmente útil. Se comprueba fácilmente la asociatividad usual:
		\[ B(cf)=(Bc)f \]
		para matrices ordinarias $ B $, $ C $ sobre $ D $.

		Por el Teorema de Diagonalización, la matriz $ A $ es equivalente a una matriz diagonal. $ B= \text{diag}(d_1, \cdots,\\ d_r, 0, \cdots, 0)$.
		$ B= QAP,\  Q\in M_{m\times m} (D), P\in M_{n\times n} (D) $ matrices inversibles, $ d_i\neq 0 $, $ 1 \leq i \leq r$, $d_i \mid d_{i+1}, \text{ y } 1 \leq i \leq r-1 $.

		Sea $ f':=Qf, e'=P^{-1}e $.
		Por el lema previo, $ f' $ es un conjunto de generadores de $ N $ y $ e' $ es una base de $ F $.
		Se tiene:
		\[ f'=Qf=QAe=QAPe'=Be' \]
		es decir:
		\[ f'_i=d_ie'_i, \quad 1 \leq i \leq r \]
		\[ f'_i =0,  \quad \text{si } r+1 \leq i \leq n\]
		([Importante en aplicaciones, no en la demostración] Nótese que como los $ e'_i $ son linealmente independientes y los $ d_i $ son no nulos, resulta que $ f'_1, \cdots, f'_r $ son linealmente independientes. Por tanto, $ N $ es libre de rango $ r $ y $ \{ f'_1, \cdots, f'_r\} $ es base de $ N $. Esto proporciona un método para encontrar una base de un submódulo de un $ D $-módulo libre a partir de un conjunto de generadores).

		Sea $y_i := \varepsilon(e'_i), 1 \leq i \leq n$. (Nótese que $ y=P^{-1}X $, ya que aplicando $\varepsilon $, con $ e'=P^{-1}e $, tenemos $ y=\varepsilon(e')=P^{-1}\varepsilon(e)=P^{-1}x $).\\
		Como $ \varepsilon $ es sobre, resulta que $ \{y_1, \cdots y_n \} $ es un conjunto de generadores de $ M $.
		\[ M=\sum_{i=1}^{n}Dy_i\]
		Veamos que esta suma es directa ($ \Leftrightarrow \sum_{i\in I} x_i=0, x_i\in M_i, \forall i \Rightarrow x_i=0\ \forall i $), i.e.,
		\[ \sum_{j=1}^{n} b_i\cdot y_i=0, \quad b_i \in D \Rightarrow b_i\cdot y_i=0, \forall i \]
		Se tiene:
		\[ 0=\sum_{i=1}^{n} b_i \cdot y_i = \sum_{i=1}^{n} b_i \cdot \varepsilon(e'_i)=\varepsilon (\sum_{i=1}^{n} b_i \cdot e'_i)\Rightarrow \sum_{i=1}^{n} b_i \cdot e'_i \in \ker(\varepsilon)=N \]
		\[ \Rightarrow \sum_{i=1}^{n} b_i \cdot e'_i=\sum_{i=1}^{r} c_i \cdot f'_i= \sum_{i=1}^{r} c_i \cdot d_i \cdot e'_i \Rightarrow (e'\text{ base}) \begin{cases}
		b_i=0, \quad r+1 \leq i \leq n \Rightarrow b_i \cdot y_i =0\\
		b_i=c_i\cdot d_i, \quad 1 \leq i \leq r \Rightarrow b_i\cdot y_i=0
		\end{cases}\]
		Ya que $ b_i\cdot y_i=c_id_iy_i=c_id_i\varepsilon(c_id_ie'_i)=\varepsilon(c_if'_i)=0 $($c_if_i\in \ker(\varepsilon)=N$).

		Así pues,
		\[ M=Dy_1 \oplus \cdots \oplus Dy_n\]
		Veamos que:
		\[ (0:y_i)=(d_i), \quad  1 \leq i \leq r\]
		\[ (0:y_i)=0, \quad  r+1 \leq i \leq n\]
		"$ \supset $"\ ay está demostrado (trivial).\\
		"$ \subset $"\  :\[ \lambda \in (0:y_i) \Rightarrow 0=\lambda y_i =\lambda \varepsilon(e'_i)= \varepsilon(\lambda e'_i) \Rightarrow \lambda e'_i \in \ker(\varepsilon)=N\Rightarrow \]
		\[\Rightarrow\lambda e'_i = \sum_{j=1}^{r}\mu_jf_j \Rightarrow \lambda e'_i = \sum_{j=1}^{r} \mu_j d_j e'_j \Rightarrow (e' \text{ base})\begin{cases}
		\lambda_i=0, \quad  r+1 \leq i \leq n \\
		\lambda_i=\mu_i, \quad 1 \leq i \leq r
		\end{cases} \]
		Ahora, las relaciones $ d_1 \mid d_2 \mid \cdots \mid d_r $, implican $ (d_1)\supset (d_2) \supset \cdots \supset (d_r) $, es decir, $ (0:y_1)\supset(0:y_2)\supset\cdots\supset(0:y_r) $, y por tanto:
		\[ (0:y_1)\supset(0:y_2)\supset\cdots\supset(0:y_r)\supset(0:y_{r+1})\supset\cdots\supset(0:y_n)\]

		Sea $ s $, $ 0 \leq s \leq n $, tal que $ (0:y_1)=(0:y_2)=\cdots =(0:y_{n-s})=D $, $ (0:y_{n-s+1})\neq D $. \\Entonces: $ y_1=y_2=\cdots = y_{n-s}=0 $.

		A continuación, definimos:
		\[ z_1:=y_{n-s+1},z_2:=y_{n-s+2}, \cdots, z_s:=y_n  \]
		Se tiene:
		\[ M=Dz_1\oplus \cdots \oplus Dz_s \]
		y $ (0:z_1)\supset(0:z_2)\supset\cdots \supset(0:z_s)$, con $ (0:z_k)\neq D $.
	\end{proof}
	\begin{note}
		Sea $ M $ un $ D $-módulo con generadores $ x_1,\cdots, x_n $ y relaciones $\sum_{j=1}^{n}a_{ij}e_j=0, 1 \leq i \leq m$. La descomposición de $ M $ dada por el Teorema de Estructura se calcula, en resumen, del siguiente modo:
		\[ A:=(a_{ij}) \in M_{m \times n}(D) \]
		Se diagonaliza: $ QAP=B= \text{diag}(d_1, \cdots d_r, 0, \cdots, 0),  d_1 \mid d_2 \mid \cdots \mid d_r$. Se tiene que $ Y=P^{-1}X $. Entonces:
		\[ M=Dy_1\oplus \cdots \oplus Dy_n \]
		\[ (0:y_i)=(d_i), \quad  1 \leq i \leq r\]
		\[ (0:y_i)=0, \quad  r+1 \leq i \leq n\]
		Por último, eliminamos los $y_i$ que sean nulos y de esta forma se obtienen los $ z_k $ del enunciado del Teorema.

	\end{note}
	%%jorge 29-11

	\begin{corollary} %%ESTO ES EN REALIDAD UN COROLARIO
		Si $D$ es un DIP y $M$ es un módulo de tipo finito (t.f.), entonces $M$ es
		suma directa de un submódulo de torsión y de un submódulo libre.
	\end{corollary}
	\begin{proof}
		Por el teorema de estructuras tenemos que:
		\[M = DZ_1 \oplus \cdots \oplus DZ_s\]
		\[(0:Z_1) \supset \cdots \supset (0:Z_s), (0:Z_k) \neq 0.\]
		Sea $r$, $0 \leq r \leq s$, tal que $(0:Z_i) \neq 0$ para $0 \leq i \leq r$ y
		$(0:Z_i) = 0$ para $r \leq i \leq s$. $\\$
		Entonces:
		\[DZ_1 \oplus \cdots \oplus DZ_r = T(M)\]
		y $DZ_1 \oplus \cdots \oplus DZ_r$ es libre.
		\[DZ_1 \oplus \cdots \oplus DZ_r \oplus DZ_{r+1} \oplus \cdots \oplus DZ_s\]
		"$\subset$" $\\$
		$1 \leq i \leq r$: $(0:Z_i) \neq 0$ $\Rightarrow$ $Z_i \in T(M)$ $\Rightarrow$
		$DZ_i \subset T(M)$ $\Rightarrow$ $DZ_1 \oplus \cdots \oplus DZ_r \subset T(M)$ $\\$

		"$\supset$" $\\$
		$x \in T(M)$ $\Rightarrow$ $x \in M$ $\Rightarrow$ $x = \sum_{i=1}^{s}\lambda_i z_i$,
		$\lambda_i \in D$ $\\$
		Además, como $x \in T(M)$ tenemos que:
		\[\exists a \in D, a\neq 0 / ax = 0\]
		y que:
		\[a(\sum_{i=1}^{s}\lambda_i z_i) = \sum_{i=1}^{s} a \lambda_i z_i \in DZ_i\]
		con lo que podemos extraer que, por ser una suma directa:
		\[a \lambda_i z_i \in DZ_i \Rightarrow a\lambda_i \in (0:Z_i) \Rightarrow a_i\lambda_i = 0, \hspace{0.2cm} r + 1 \leq i \leq s \stackrel{a \neq 0}{\Rightarrow} \lambda_i = 0, \hspace{0.2cm} r + 1 \leq i \leq s\]
		Por lo que,
		\[x = \sum_{i = 1}^{r} \lambda_i z_i \in DZ_1 \oplus \cdots \oplus DZ_r\]
		y,
		\[DZ_{r+1} \oplus \cdots \oplus DZ_s \simeq D \oplus \stackrel{s - r}{\cdots} \oplus D = D^{s - r} \hspace{0.2cm} libre.\]
		Por lo que, para $r + 1 \leq i \leq s$,
		\[DZ_i \simeq \frac{D}{(0:Z_i)} = D.\]
	\end{proof}
	\begin{corollary}
		Sea $D$ un DIP y $M$ un $D$-módulo de torsión de tipo finito. Entonces:
		\begin{center}
			$M$ es libre $\Leftrightarrow$ $M$ es libre de torsión.
		\end{center}
	\end{corollary}
	\begin{proof}
		Inmediata a partir del anterior corolario.
	\end{proof}

	\section{Módulos de torsión y componentes primarias}
	Sea $D$ un DIP y $M$ sea $D$-módulo de tipo finito. Sea además $p$ un elemento primo de $D$ (i.e., $(p)$ es un ideal primo distinto de $0$, i.e., $p$ es irreducible). $\\$
	Se llama \underline{componente $p$-primaria} de $M$ al subconjunto:
	\[M_p = \{y\in M / \exists k\in \mathbb{N}, p^{k}y = 0\},\]
	que, como se puede observar, son los elementos de $M$ aniquilados por alguna potencia de $p$.$\\$
	Además, $M_p$ es un submódulo de $M$ y $M_p \subset T(M)$. Así, si $M_p = M$, se dice que $M$ es \underline{$p$-primario}.
	\begin{example}
		Cada $D$-módulo cíclico de la forma $\frac{D}{T(M)}$ es $p$-primario. Tenemos que
		\[f: D \longrightarrow \frac{D}{(p^e)}\]
		es la aplicación canónica. Vemos que:
		\[p^e[\frac{D}{(p^e)}] = 0\]
		y
		\[p^e(x + (p^e)) = p^ex + (p^e) = 0.\]
	\end{example}
	\begin{lemma}
		Si $p_1, ..., p_h$ son primos distintos, entonces la suma de las componentes $p_i$-primarias, $1\leq i\leq h$ es suma directa:
		\[\sum_{i=1}^{h} = \oplus_{i=1}^h Mp_i.\]
	\end{lemma}
	\begin{proof}
		Probar que es suma directa probaremos lo siguiente:
		\[M_{p_1} \cap [M_{p_2} + \cdots M_{p_h}] \stackrel{?}{=} 0.\]
		Supondremos $y \in M_{p_1} \cap [M_{p_2} + \cdots M_{p_h}]$, entonces:
		\[y \in M_{p_1} \Rightarrow p_1^{k_1}y=0\]
		e:
		\[y \in M_{p_2} + \cdots M_{p_h} \Rightarrow p_2^{k_2} \cdots p_h^{k_h}y = 0,\]
		pero mcd$(p_1^{k_1}, p_2^{k_2}\cdots p_h^{k_h}) = 1$ y, por lo tanto:
		\[1 \in (0:y) \Rightarrow y=0.\]
	\end{proof}
	\begin{lemma}
		Sea $D$ un DIP y $M$ un $D$-módulo. Sea $x\in M$ y $d\in D$ tal que $(0:x) = (d)$. Sea $d = np_1^{e_1} \cdots p_t^{e_t}$, $p_i \neq p_j$, si $i\neq j$, la factorización de $d$ en primos. Entonces:
		\[DX = DX_1 \oplus \cdots \oplus DX_t,\]
		con $(0:X_i) = (p_i^{e_i})$. En particular, $DX_i$ es $p$-primario.
	\end{lemma}
	\begin{proof}
		Para cada $i$, $1 \leq i \leq t$, sea
		\[d_i = n p_1^{e_1} \cdots p_{i-1}^{e_{i+1}} \cdots p_t^{k_t}\]
		de modo que $d = d_ip_i^{e_i}$. Además, sea $X_i = d_iX \in M$. Se tiene entonces que $(0:X_i) = (p_i^{e_i})$. Veámoslo:$\\$
		"$\supset$"
		\[p_i^{e_i}X_i = p_i^{e_i} d_i X = dX = 0.\]
		"$\subset$"
		\[x\in (0:X_i) \Rightarrow 0 = \lambda X_i = \lambda d_i X \Rightarrow \lambda d_i \in (0:X) = (d) \Rightarrow \lambda d_i = \mu d \Rightarrow \lambda d_i= \mu d_i p_i^{e_i} \Rightarrow \lambda = \mu p_i^{e_i} \in (p_i^{e_i}).\]
		Veamos que $DX = DX_1 \oplus \cdots \oplus DX_t$:
		\begin{center}
			$(0: X_i) = (p_i^{e_i}) \Rightarrow x_i \in M_{p_i} \Rightarrow DX_i \subset M_{p_i} \stackrel{Lema 3.1}{\Rightarrow}$ La suma $DX_1 + \cdots + DX_t$ es directa.
		\end{center}
		"$\supset$"$\\$
		\[X_i = d_i X\in DX\]
		"$\subset$"$\\$
		\[mcd(d_1, ..., d_t)\Rightarrow 1 = \sum_{i = 1}^{t} \alpha_i d_i,\]
		con $\alpha_i \in D$. Entonces:
		\[X = 1X = (\sum_{i = 1}^{t} \alpha_i d_i)X = \sum_{i = 1}^{t} \alpha_i (d_iX) = \sum_{i = 1}^{t} \alpha_i X_i \Rightarrow X \in DX_1 + ... + DX_t \Rightarrow DX \subset DX_1 + ... + DX_t.\]
	\end{proof}

	SERGIO 3-12
	\begin{proposition}
	Sea $D$ un $DIP$ y $M$ un $D$-módulo de torsión de tipo finito. Entonces:
	\begin{enumerate}
	\item $M=\bigoplus_pM_P$, donde la suma se extiende a todos los primos $p$ tal que $M_P\neq0$ y hay solo un número finito de tales primos.
	\item Cada $M_P$ se puede expresar en la forma $M_p=DZ_1\oplus\dots\oplus DZ_r$ tal que $(0:Z_i)=(p^{e_i})$ y $1\leq e_1 \leq e_r$.
	\item La sucesión $e_1,\dots,e_r$ está determinada de modo único.
	\end{enumerate}
	\end{proposition}

	\begin{proof}
		Por el Teorema de estructura:
		\[M=DX_1\oplus\dots\oplus DX_n\]
		con $(0:X_1)\supset\dots\supset(0:X_n)$, $(0:X_k)\neq D$ y $(0:X_k)\neq 0$.

		Sean $d_k\in D \ / \ (0:X_k)=(d_k) \ 1\leq k\leq n$. Se verifia $d_1|d_2 | \dots | d_n$.

		Sean $p_1,\dots,p_h$ los factores primos distintos dos a dos que aparecen en los $d_k$, $1\leq k\leq n$. Se tiene entonces:
		\[d_k=u_kp_1^{e_{1k}}\dots p_h^{e_{hk}}\]
		con $u_k$ unidad y $e_{ik}\geq 0 \ \ 1\leq i\leq n$ ($e_{ik}$ será 0 cuando $e_i$ no aparezca en la factorización de $d_k$).

		Aplicando el lema anterior:
		\[DX_k=DX_{1k}\oplus\dots\oplus DX_{hk} \text{ con } (0:X_{ik})=(p^{e_{ik}}_i)\]
		Nótese que si $p_i$ no aparece en la factorización de $d_{ki}$, es decir, si $e_{ik}=0$, entonces $X_{ik}=0$ porque $e_{ik}=0\Rightarrow p^{e_{ik}}_i=1$).

		Así $DX_k\subset M_{p_1}+\dots+M_{p_n}$ ($(0:X_{ik})=(p^{e_{ik}}_i)\Rightarrow X_{ik}\in M_{p_i}$ y entonces $DX_n=(DX_{1k}\subset M_{p_1})\oplus\dots\oplus (DX_{hk}\subset M_{p_n})$) con lo que $M=M_{p_1}+\dots + M_{p_n}$.

		Por el lema, esta suma es directa:
		\[M=M_{p_1}\oplus\dots\oplus M_{p_n}\]

		Si $p$ es otro primo se sigue del lema:
		\[M_p=M_p\cap M=M_p \cap (M_{p_1}+\dots+M_{p_n})=0\]

		Se tiene así probada la primera parte de la proposición.

		Podemos deducir de las siguientes igualdades (teniendo en cuenta $d_1|d_2|\dots|d_n$):
		\[
		\begin{rcases}
			d_1=u_1p^{e_{11}}_1\dots p^{e_{n1}}_n\\
			\vdots \ \ \ \ \ \ \ \  \\
			d_n=u_np^{e_{1k}}_1\dots p^{e_{nk}}_n\\
		\end{rcases}
		\Rightarrow e_{i1}\leq e_{i2} \leq\dots\leq e_{in}, \ 1\leq i\leq h
		\]

		La segunda parte de la proposición será consecuencia de esto y de lo siguiente que demostramos ahora:
		\[M_{p_i}=DX_{in}\oplus\dots\oplus DX_{in},\ \ 1\leq i\leq h\]

		$(\supset)$
		\[p^{e_{ik}}_iX_{ik}=0\Rightarrow X_{ik}\in M_{p_i}\Rightarrow DX_{ik} \in M_{p_i},\ \ 1\leq i\leq h\]

		$(\subset)$
		\[x\in M_{p_i} \subset M = DX_1\oplus\dots\oplus DX_n=(DX_{11}\oplus\dots\oplus DX_{h1})\oplus\dots\oplus(DX_{1n}\oplus\dots\oplus DX_{hn}) \Rightarrow\]
		\[x=\sum_{r=1}^n\sum_{l=1}^h \lambda_{lr}x_{lr} \ \ x_{lr}\in DX_{lr}\subset M_{p_l},\ \ x\in M_{p_i}\]

		Como la suma $M_{p_1}+\dots M_{p_h}$ es directa, todos los sumandos del segundo miembro son nulos salvo para $l=i$ (en las sumas diretas los elementos se escriben de forma única). Luego:

		\[x=\sum_{r=1}^n\lambda_{ir}x_ir \in DX_{i1}\oplus\dots\oplus DX_{in}\]
		Demostremos ahora la tercera parte. Para abreviar denotamos $N\equiv M_p$.
		\[N=DZ_1\oplus\dots\oplus DZ_r \ \ (0:Z_i)=(p^{e_i}) \ \ 1\leq e_1\leq e_2 \leq\dots\leq e_r\]
		\[N\simeq D/(p^{e_1})\oplus\dots\oplus D/(p^{e_r}) \ \ \ (DZ_i\simeq D/(0:Z_i)=D/(p^{e_i})) \]

		En primer lugar probaremos que $e_r=$ "menor número natural tal que $p^nN=0$".

		($\geq$)
		\[p^{e_r}N=0 \  \text{ pues } \ p^{e_r}(D/(p^{e_i}))=0 \ \ \ 1\leq i\leq r\]
		\[p^{e_r}(x+(p^{e_i}))=p^{e_r}x+(p^{e_i})=0 \ \ (p^{e_r}x\in (p^{e_i}))\]

		($\leq$)
		\[p^nN=0\Rightarrow p^n(D/(p^{e_r}))=0 \Rightarrow p^n(n+(p^{e_r}))=p^n+(p^{e_r})=0 \Rightarrow p^n\in (p^{e_r}) \Rightarrow p^{e_r}|p^n \Rightarrow e_r \leq n\]

		Luego $e_r$ está determinado de modo único por $N$. Llamaremos a $e_r$ el $p$-exponente de $N$ y razonaremos por inducción sobre él.

		Supongamos:
		\[ N\simeq D/(p^{e_1}) \oplus \cdots D/(p^{e_r}), \quad 1\leq e_1\leq\cdots\leq e_r \]
		\[ N\simeq D/(p^{f_1}) \oplus \cdots D/(p^{f_s}), \quad 1\leq f_1\leq\cdots\leq f_s \]

		Lo que hemos de ver es que $ r=s $, $ e_i=f_i $, $ \forall i $.
		Ya sabemos que $ e_r=  f_s\equiv p$-exponente de $ N $.

		Razonaremos por inducción en el $ p $-exponente.
		Si $ e_r=f_s=1 \Rightarrow e_i=f_j=1 \ \forall i,j \Rightarrow N $ es un $ D/(p) $-exponente, y por la igualdad de dimensiones, resulta $ r=s $.

		Supongamos $ e_r=f_s $ y que el resultado es cierto para unidades de $ p $-exponente $ <e_r=f_s $.

		Sean $ m $ y $ n $ tales que:
		\[ e_i\geq 2\Leftrightarrow i\geq m, f_1 \geq 2 \Leftrightarrow j \geq n \]
		Entonces:
		\[ pN\simeq \bigoplus_{i=m}^r D/(p^{e_i-1})  \]
		\[ pN\simeq \bigoplus_{j=n}^s D/(p^{f_j-1})  \]
		En efecto, se tiene:
		\[ N\simeq \bigoplus_{i=1}^{m-1} D/(p) \oplus  \bigoplus_{i=m}^{r}D/(p^{e_i}), \quad e_i \geq 2  \]
		y por tanto:
		\[ pN\simeq \bigoplus_{i=1}^{m-1} pD/(p) \oplus  \bigoplus_{i=m}^{r}pD/(p^{e_i}) = \bigoplus_{i=m}^{r}pD/(p^{e_i}) \text{, ya que } pD/(p)=0 \]
		¿Será cierto que $ D/(p^{e_i-1})\simeq pD/(p^{e_i}) $?

		Diagrama de funciones:

		\[ \begin{tikzpicture}

		\node (n1) {$(p^{e_{i-1}})$};
		\node (n2) [right of=n1] {$(p^{e_{i}})$};
		\node (D) [below of=n1] {$D$};
		\node (pD) [right of=D] {$pD$};
		\node (D1) [below of=D] {$D/p^{e_{i-1}}$};
		\node (D2) [right of=D1] {$pD/p^{e_{i}}$};
		\node (center) [right of=D, node distance=3em, below of=D] {$ \circlearrowright $};
		\draw[->] (n1) to node [swap] {} (n2);
		\draw[inyec->] (n1) to node [swap] {} (D);
		\draw[inyec->] (n2) to node [swap] {} (pD);
		\draw[-sobre] (D) to node [swap] {$ p $} (pD);
		\draw[-sobre] (D) to node [swap] {} (D1);
		\draw[-sobre] (pD) to node [swap] {} (D2);
		\draw[-sobre] (D1) to node [swap] {$ \theta $} (D2);
		\end{tikzpicture} \]
		$ \theta $ homomorfismo de $ D $-módulos.
		\[ x+ (p^{e_{i-1}}) \longmapsto px+ (p^{e_{i}})\]
		$ \theta $ es inyectiva? i.e. $ \theta(\overline{x})=0 \Rightarrow \overline{x}=0$?
		 \[ \theta(\overline{x})=\overline{px}=0 \Rightarrow px \in  (p^{e_{i}}) \Rightarrow  p^{e_{i}} \mid px \Rightarrow  p^{e_{i-1}} \mid x \Rightarrow x \in  (p^{e_{i-1}})\Rightarrow \overline{x}=0 	 \]

		COSAS
		Por inducción:
		$ r-m= s-n $\\
		$ e_m =f_n, \cdots , e_r =f_s$
		Por otra parte:
		\[ N/pN\simeq \bigoplus_{1}^r D/(p)  \]
		\[ N/pN\simeq \bigoplus_{1}^s D/(p)  \]
		En efecto:

		\[ \begin{tikzpicture}

		\node (pN) {$pN$};
		\node (o1) [right of=pN] {$0$};
		\node (o2) [right of=o1] {$0$};
		\node (pd1) [right of=o2] {$pD/(p^{e_{m}})$};
		\node (pd2) [right of=pd1,shift={(1,0)}] {$pD/(p^{e_{r}})$};
		\draw[white] (pN) edge node [black,shift={(0,-0.2)}] {$\simeq$} (o1);
		\draw[white] (o2) edge node [black,shift={(0,-0.25)}] {$\oplus$} (pd1);
		\draw[white] (o1) edge node [black,shift={(0,-0.25)}] {$\oplus\  \cdots \ \oplus$} (o2);
		\draw[white] (pd1) edge node [black,shift={(0,-0.25)}] {$\oplus \cdots \oplus$} (pd2);
		\node (N) [below of=pN]{$N$};
		\node (dp1) [below of=o1] {$D/(p)$};
		\node (dp2) [below of=o2] {$D/(p)$};
		\node (dp3) [below of=pd1] {$D/(p^{e_{m}})$};
		\node (dp4) [below of=pd2] {$D/(p^{e_{r}})$};
		\draw[white] (N) edge node [black,shift={(0,-0.2)}] {$\simeq$} (dp1);
		\draw[white] (dp1) edge node [black,shift={(0,-0.25)}] {$\oplus \cdots \oplus$} (dp2);
		\draw[white] (dp2) edge node [black,shift={(0,-0.25)}] {$\oplus$} (dp3);
		\draw[white] (dp3) edge node [black,shift={(0,-0.25)}] {$\oplus \cdots \oplus$} (dp4);
		\draw[inyec->] (pN) to node [swap] {} (N);
		\draw[inyec->] (o1) to node [swap] {} (dp1);
		\draw[inyec->] (o2) to node [swap] {} (dp2);
		\draw[inyec->] (pd1) to node [swap] {} (dp3);
		\draw[inyec->] (pd2) to node [swap] {} (dp4);

		\node (Npn) [below of=N]{$N/pN$};
		\node (dp21) [below of=dp1] {$D/(p)$};
		\node (dp22) [below of=dp2] {$D/(p)$};
		\node (dp23) [below of=dp3] {$D/pD$};
		\node (dp24) [below of=dp4] {$D/pD$};
		\draw[white] (Npn) edge node [black,shift={(0,-0.2)}] {$\simeq$} (dp21);
		\draw[white] (dp21) edge node [black,shift={(0,-0.25)}] {$\oplus \cdots \oplus$} (dp22);
		\draw[white] (dp22) edge node [black,shift={(0,-0.25)}] {$\oplus$} (dp23);
		\draw[white] (dp23) edge node [black,shift={(0,-0.25)}] {$\oplus \cdots \oplus$} (dp24);
		\draw[-sobre] (N) to node [swap] {} (Npn);
		\draw[-sobre] (dp1) to node [swap] {} (dp21);
		\draw[-sobre] (dp2) to node [swap] {} (dp22);
		\draw[-sobre] (dp3) to node [swap] {} (dp23);
		\draw[-sobre] (dp4) to node [swap] {} (dp24);
		\end{tikzpicture} \]
		Y por ejemplo:
		\[ pD/(p^{e_{m}}) \flechaInyectiva D/(p^{e_{m}}) \flechaSobreyectiva [D/(p^{e_{m}})]/[pD/(p^{e_{m}})] \simeq D/pD \]
		ya que si $  M_2 \subset M_1 \subset M $:
		\[ (M/M_2)/(M_1/M_2)\simeq M/M_1 \]

		Por la igualdad de dimensiones de (del $ D/(p) $-espacio vectorial $ N/pN $, resulta $ r=s $)
		\[ \begin{rcases}
		r-m&=s-n\\
		r&=s
		\end{rcases} \Rightarrow m=n \]
		$ e_1=f_1=1\\
		\vdots\\
		e_{m-1}=f_{m-1}=1 \\$
		$ e_m=f_m\\
		e_{m+1}=f_{m+1}\\
		\vdots \\
		e_r=f_r $.
	\end{proof}
	\subsection{Invariantes}
		Sea $D$ un DIP y $M$ un $D$-módulo de torsión de tipo finito. Recapitulemos parte de lo dicho en la proposición anterior. Se puede escribir:
		\begin{enumerate}[I)]
			\item $M = DX_1 \oplus \cdots \oplus DX_n$
			\[(0:X_1) \supset (0:X_n), \hspace{0,2cm} (0:X_k) \neq D, \hspace{0,2cm} (0:X_k) \neq 0.\]
			Si $d_k \in D$ es un elemento tal que $(0:X_k) = d_k$, entonces:
			\[d_1 | d_2 | ... | d_k\]
			\[M \simeq \frac{D}{(d_1)} \oplus \cdots \oplus \frac{D}{(d_k)}\]
			Los ideales $(d_i)$ se llaman los factores invariantes de $M$.$\\$
			Por otra parte, se puede escribir:
			\item $M = (DX_{11} \oplus \cdots \oplus DX_{1n}) \oplus \cdots \oplus (DX_{n1} \oplus \cdots \oplus DX_{nn})$, con $(0:X_n) = (p_i^{e_{ik}})$ para $1\leq k$$\leq n$ y $e_{i1} \leq ... \leq e_{in}$ para $1\leq i \leq h$.
			\[M \simeq (\frac{D}{(p_1^{e_{11}})} \oplus \cdots \oplus \frac{D}{(p_1^{e_{1n}})}) \oplus \cdots \oplus (\frac{D}{(p_1^{e_{h1}})} \oplus \cdots \oplus \frac{D}{(p_1^{e_{hn}})}).\]
		\end{enumerate}
		Los ideales $p_i^{e_{ik}}$ se llaman \underline{divisores elementales} de $M$. En una descomposición de tipo $II)$ se tiene:
		\[M_{p_i} = DX_{i1} \oplus \cdots \oplus DX_{in} \simeq \frac{D}{p_i^{e_{i1}}} \oplus \cdots \oplus \frac{D}{p_i^{e_{in}}}\]
		con $1 \leq i \leq h$. En la demostración de la proposicion anterior se ha visto como obtener una descomposición de tipo $II)$ a partir de una de tipo $I)$. De la proposición se sigue que los divisores elementales son invariantes de $M$ (i.e., dependen solo de $M$ y no de la descomposición).
		\[d_k = n_k p_1^{e_{1k}} \cdots p_n^{e_{hk}}\]
		unidad. Dados pues los $p_i^{e_{ik}}$ se pueden reconstruir, salvo unidades, los $d_k$. Los factores invariantes están, por tanto, determinados por los divisores elementales. Se sigue de esto que los factores invariantes son invariantes de $M$. $\\$
		Se tienen:
		\begin{enumerate}[·]
			\item  Dos módulos de torsión de tipo finito sobre un DIP son isomorfos si y sólo si tienen los mismos factores invariantes.
			\item  Dos módulos de torsión de tipo finito sobre un DIP son isomorfos si y sólo si tienen los mismos divisores elementales.
		\end{enumerate}
		\begin{proof}
			"($\Rightarrow$)" $\\$
			$M$, $M'$ $D$-módulos de torsión de tipo finito y $\phi: M \simeq M'$. Descomposición de tipo $I)$ para $M$:$\\$
			\[M = DX_1 \oplus \cdots \oplus DX_n, \hspace{0,2cm} (0:X_1) \supset ... \supset (0:X_n)\]
			y $(0:X_i) \neq D$, $(0:X_i) \neq 0$. Tenemos entonces que: $\\$
			\[M' = \phi (M) = D\phi (X_1) \oplus \cdots \oplus D\phi (X_n)\]
			pero, ¿$(0:\phi (X_i)) = (0:X_i)$? Vemos que:
			\[\lambda \in (0: \phi (X_i)) \Rightarrow \lambda\phi(X_i) = 0\]
			y sabemos que $\phi(\lambda X_i) = \lambda \phi (X_i)$. Así pues,
			\[\lambda X_i = 0 \Leftrightarrow \lambda\in (0:X_i).\]
			Por lo que $(0:\phi(X_1)) \supset ... \supset (0:\phi(X_n))$, con $(0:\phi (X_i)) = (0:X_i)$. Así, $M'$ es una descomposición de tipo $I)$ para $M'$.
			\begin{center}
				La factorización de $M'$ es $(0:\phi (X_i))$ $=$ La factorización de $M$ es $(0:X_i)$.
			\end{center}
			"($\Leftarrow$)" $\\$
			Sean $M$ y $M'$ $D$-módulos de torsión de tipo finito que tienen los mismos factores invariantes:
			\[M = DX_1 \oplus \cdots \oplus DX_n, \hspace{0,2cm} (0:X_1) \supset ... \supset (0:X_n)\]
			y $(0:X_i) \neq D$, $(0:X_i) \neq 0$; y
			\[M' = DX'_1 \oplus \cdots \oplus DX'_{n'}, \hspace{0,2cm} (0:X'_1) \supset ... \supset (0:X'_{n'})\]
			y $(0:X'_i) \neq D$, $(0:X'_i) \neq 0$.
			Si $(0:X_i) = (0:X'_i)$ $\forall i$, entonces $n = n'$ y, de forma inmediata:
			\[M \simeq \frac{D}{(0:X_1)} \oplus \cdots \oplus \frac{D}{(0:X_n)} \simeq M'\]
		\end{proof}
		EL siguiente resultado contiene "la parte de unicidad" en el teorema de estructuras.
		\begin{theorem}
			Sea $D$ un DIP y $M$ un $D$-módulo de tipo finito. Supongamos:
			\[M = DZ_1 \oplus \cdots \oplus DZ_s = DZ'_1 \oplus \cdots \oplus DZ'_{s'}\]
			con:
			\[(0:Z_1)\supset ... \supset (0:Z_s), (0: Z_s) \neq D\]
			\[(0:Z'_1)\supset ... \supset (0:Z'_{s'}), (0: Z'_{s'}) \neq D\]
			entonces $s = s'$ y $(0:Z_i) = (0:Z'_i)$, con $1\leq i \leq s$.
		\end{theorem}
		\begin{proof}
			Sean $r$ y $r'$ tales que:$\\$
			\begin{center}
				$(0:Z_i) \neq 0$ con $1 \leq i \leq r$ y $(0:Z_i) = 0$ con $r \leq i \leq s $ \\
				$(0:Z'_i) \neq 0$ con $1 \leq i \leq r'$ y $(0:Z'_i) = 0$ con $r' \leq i \leq s'$
			\end{center}
			entonces:
			\[T(M) = DZ_1 \oplus \cdots \oplus DZ_r\]
			\[T(M') = DZ'_1 \oplus \cdots \oplus DZ'_{r'}\]
			Como $T(M)$ en un $D$-módulo de torsión de tipo finito, sus factores invariantes están determinados de modo único (como ya sabemos). Entonces:
			\[r=r', \hspace{0,2cm} (0:Z_i) = (0:Z'_i), 1\leq i \leq r = r'\]
			Por otra parte:
			\[\frac{M}{T(M)}\simeq DZ_{r+1} \oplus \cdots \oplus DZ_s\]
			ya que:
			\[M = T(M)\oplus DZ_{r+1} \oplus \cdots \oplus DZ_s.\]
			\begin{note}
				$\frac{X \oplus Y}{X} \simeq Y$, con $X,Y$ módulos y, por el segundo teorema de isomorfía:
				\[\frac{X+Y}{X}\simeq \frac{Y}{X \cap Y} = Y.\]
			\end{note}
			y tenemos que:
			\[\frac{M}{T(M)} \simeq DZ'_{s'}\]
			$\frac{M}{T(M)}$ es entonces un $D$-módulo libre de rango $s-r$ y de rango $s'-r'$ por lo que, como $r=r'$, entonces $s = s'$ y concluímos.
		\end{proof}
	\begin{definition}
		Sea $D$ un DIP y $M$ un D-módulo de tipo finito. Entonces:
		\[L \simeq \frac{M}{T(M)}.\]
		El rango de $L$ es un invariante de $M$ y se llama el \underline{rango} de $M$. El rango es el número $n-r$ del teorema de estructura.
	\end{definition}
	En efecto:
	\[M = DY_1 \oplus \cdots \oplus DY_n\]
	con $(0:Y_i) = \begin{cases}
	(d_i) & 1\leq i\leq r \\
	0 & r+1\leq i \leq n
	\end{cases}$ y:
	\[T(M) = DY_{1} \oplus \cdots \oplus DY_r\]
	\[L = DY_{r+1} \oplus \cdots \oplus DY_n \simeq \frac{D}{(0:Y_{r+1})} \oplus \cdots \oplus \frac{D}{(0:Y_{n})}\simeq D \oplus \stackrel{n-r}{\cdots} \oplus D.\]
	Los \underline{factores invariantes} y los \underline{divisores elementales} de $M$ son, por definición, los de $T(M)$. Se tiene:
	\begin{enumerate}[·]
		\item Dos módulos de tipo finito sobre un DIP son isomorfos si y sólo si tienen el mismo rango y los mismos factores invariantes.
		\item Dos módulos de tipo finito sobre un DIP son isomorfos si y sólo si tienen el mismo rango y los mismos factores invariantes.
	\end{enumerate}

	\begin{proposition}
		Dos módulos de tipo finito sobre un DIP son isomorfos si y solo si tienen el mismo rango y los mismos factores invariantes.
	\end{proposition}

	\begin{proof}
		$(\Rightarrow)$

		Por hipótesis existe $\Phi:M\flechaBiyectiva N$ y entonces $\Phi|_{T(M)}T(M):\flechaBiyectiva T(N)$. Por lo tanto $T(M)$ y $T(N)$ son módulos de torsión isomorfos sobre un DIP y tienen los mismos factores invariantes $\Rightarrow$ $M$ y $N$ tienen los mismos factores invariantes.

		\[ \begin{tikzpicture}
		
		\node (TM) {$T(M)$};
		\node (TN) [right of=n1] {$T(N)$};
		\node (M) [below of=n1] {$M$};
		\node (N) [right of=D] {$N$};
		\node (MTM) [below of=D] {$\frac{M}{T(M)}$};
		\node (NTN) [right of=D1] {$\frac{N}{T(N)}$};
		\draw[inyec-sobre] (TM) to node [swap] {} (TN);
		\draw[inyec->] (TM) to node [swap] {} (M);
		\draw[inyec->] (TN) to node [swap] {} (N);
		\draw[inyec-sobre] (M) to node [swap] {$ \Phi $} (N);
		\draw[-sobre] (M) to node [swap] {} (MTM);
		\draw[-sobre] (N) to node [swap] {} (NTN);
		\draw[inyec-sobre] (MTM) to node [swap] {$ \overline{\Phi} $} (NTN);
		\end{tikzpicture} \]

		$M/T(M)$ y $N/T(N)$ son módulos libres isomorfos $\Rightarrow$ rango($M/T(M)$)=rango($N/T(N)$) $\Rightarrow$ rango($M$)= rango($N$).
		
		$(\Leftarrow)$
	
		\[ \begin{rcases} 
			\text{Los factores invariantes de $M$ son los de $T(M)$} \\
			\text{Los factores invariantes de $N$ son los de $T(N)$}
		\end{rcases} \Rightarrow M/T(M) \text{ y } N/T(N) \text{ tienen mismos fact. inv. } \Rightarrow\] 
		\[T(M)\simeq T(N).\]

		\[ \begin{rcases} 
			\text{El rango de $M$ es el rango de  $M/T(M)$} \\
			\text{El rango de $N$ es el mismo de $N/T(N)$}
		\end{rcases} \Rightarrow M/T(M) \text{ y } N/T(N) \text{ tienen el mismo rango } \Rightarrow\] 
		\[M/T(M)\simeq N/T(N) \text{ (por ser libres)}.\]

		\[M\simeq T(M)\oplus M/T(M)\]

		Entonces:

		\[ M\simeq T(M)\oplus M/T(M) \simeq T(N)\oplus N/T(N) \simeq N\]

		Aclaración: $M\simeq T(M)\oplus L \simeq T(M)\oplus M/T(M) \ \ L\simeq M/T(M)$.


	\end{proof}
\end{document}
